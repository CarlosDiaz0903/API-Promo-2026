<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OLIMPIADAS 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/olimpiadas.css">
    <link rel="stylesheet" href="styles/tabs.css">
    <link rel="stylesheet" href="styles/grid-olimpiadas.css">
    <link rel="shortcut icon" href="icons/LOGO-P1.png" type="image/x-icon">
</head>
<body>
    <div class="title">OLIMPIADAS 2025</div>

    <div class="especificaciones">
        <div class="text1">
            <div class="circulo"></div>
            <div class="fixure">Basado en los Fixure Oficiales</div>
        </div>
        <div class="lastupdate">Última actualización <span class="text-lastupdate" id="lastupdate"></span></div>
    </div>

    <div class="tabs">
        <button class="dia" onclick="showContent('date1', this)"><span>03 OCT</span></button>
        <button class="dia" onclick="showContent('date2', this)"><span>06 OCT</span></button>
        <button class="dia" onclick="showContent('date3', this)"><span>07 OCT</span></button>
        <button class="dia" onclick="showContent('date4', this)"><span>09 OCT</span></button>
        <button class="dia" onclick="showContent('date5', this)"><span>10 OCT</span></button>
    </div>


    <div id="date1" class="grid-event"></div>
    <div id="date2" class="grid-event" style="display:none;"></div>
    <div id="date3" class="grid-event" style="display:none;"></div>
    <div id="date4" class="grid-event" style="display:none;"></div>
    <div id="date5" class="grid-event" style="display:none;"></div>


    <script>
        function showContent(dateId, button) {
  // Ocultar todos los contenedores
  document.querySelectorAll(".grid-event").forEach(div => div.style.display = "none");

  // Mostrar solo el correspondiente
  document.getElementById(dateId).style.display = "grid";

  // Quitar 'active' a todos los botones
  document.querySelectorAll(".dia").forEach(btn => btn.classList.remove("active"));

  // Añadir 'active' al botón actual
  button.classList.add("active");
}
    function formatHora(hora24) {
    const [h, m] = hora24.split(":");
    const date = new Date();
    date.setHours(h, m);

    let hora = date.toLocaleTimeString("en-PE", {
        hour: "2-digit",
        minute: "2-digit",
        hour12: true
    });

    return hora.replace(" ", ""); // elimina el espacio entre la hora y AM/PM
}

// Función para asignar clase según país
function getClaseEquipo(nombre) {
    if (/alemania/i.test(nombre)) return "alemania";
    if (/italia/i.test(nombre)) return "italia";
    if (/francia/i.test(nombre)) return "francia";
    return "";
}

fetch("olimpiadas.json")
    .then(r => r.json())
    .then(data => {
        // Agrupar eventos por día
        const eventosPorDia = {};

        data.forEach(evento => {
            if (!eventosPorDia[evento.dia]) {
                eventosPorDia[evento.dia] = [];
            }
            eventosPorDia[evento.dia].push(evento);
        });

        // Recorrer cada día
        Object.keys(eventosPorDia).forEach(dia => {
            // Ordenar cronológicamente por hora (HH:mm en 24h)
            eventosPorDia[dia].sort((a, b) => {
                return a.hora.localeCompare(b.hora);
            });

            eventosPorDia[dia].forEach(evento => {
                const hora12 = formatHora(evento.hora);

                // Determinar clases dinámicamente
                const clase1 = getClaseEquipo(evento.equipo1);
                const clase2 = getClaseEquipo(evento.equipo2);

                const html = `
                <div class="event">
                    <div class="Data1">
                        <div class="deporte">${evento.deporte}</div>
                        <div class="partidos">
                            <div class="equipo ${clase1}">${evento.equipo1}</div>
                            <p>VS</p>
                            <div class="equipo ${clase2}">${evento.equipo2}</div>
                        </div>
                    </div>
                    <div class="dataplace">
                        <div class="hora">${hora12}</div>
                        <div class="lugar">${evento.lugar}</div>
                    </div>
                </div>
                `;

                // Mapear fecha a contenedor
                let diaId = "";
                switch (dia) {
                    case "2025-10-03": diaId = "date1"; break;
                    case "2025-10-06": diaId = "date2"; break;
                    case "2025-10-07": diaId = "date3"; break;
                    case "2025-10-09": diaId = "date4"; break;
                    case "2025-10-10": diaId = "date5"; break;
                }

                if (diaId) {
                    document.getElementById(diaId).innerHTML += html;
                }
            });
        });
    });

    const lastModified = new Date(document.lastModified);
        const opciones = { day:"2-digit", month:"2-digit", year:"numeric", hour:"2-digit", minute:"2-digit" };
        document.getElementById("lastupdate").textContent = lastModified.toLocaleString("es-PE", opciones);
    </script>
</body>
</html>
